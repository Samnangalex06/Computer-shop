<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel = "stylesheet" href="Home.css">
    <title>ComputerShop</title>
</head>
<body>
    <div id="header-placeholder"></div>
    <div id = "category"></div>
    <section class="products">
        <div class="section-header">
            <h2>Hot Promotion</h2>
        </div>
        <div class="product-row">
          <div class="product">
              <img src="img/ROG1.png" alt="ROG ZEPHYRUS G14 GA403WR 2025">
              <p>ROG ZEPHYRUS G14 GA403WR 2025</p>
              <strong>$2999</strong>
              <button class="add-to-cart-btn" data-product-name="ROG ZEPHYRUS G14 GA403WR 2025" data-product-price="2999" data-product-image="img/ROG1.png">Add to Cart</button>
          </div>
          <div class="product">
              <img src="img/MSI2.png" alt="MSI Cyborg 14A12VE-407KH">
              <p>MSI Cyborg 14A12VE-407KH</p>
              <strong>$2599</strong>
              <button class="add-to-cart-btn" data-product-name="MSI Cyborg 14A12VE-407KH" data-product-price="2599" data-product-image="img/MSI2.png">Add to Cart</button>
          </div>
          <div class="product">
              <img src="img/MSI1.png" alt="MSI CROSSHAIR 16 HXD 2025">
              <p>MSI CROSSHAIR 16 HXD 2025</p>
              <strong>$2999</strong>
              <button class="add-to-cart-btn" data-product-name="MSI CROSSHAIR 16 HXD 2025" data-product-price="2999" data-product-image="img/MSI1.png">Add to Cart</button>
          </div>
          <div class="product">
              <img src="img/ROG2.png" alt="ROG ZEPHYRUS M16 GU604VY 2025">
              <p>ROG ZEPHYRUS M16 GU604VY 2025</p>
              <strong>$2499</strong>
              <button class="add-to-cart-btn" data-product-name="ROG ZEPHYRUS M16 GU604VY 2025" data-product-price="2499" data-product-image="img/ROG2.png">Add to Cart</button>
          </div>
          <div class="product">
              <img src="img/MSI1.png" alt="MSI CROSSHAIR 16 HXD 2025">
              <p>MSI CROSSHAIR 16 HXD 2025</p>
              <strong>$2999</strong>
              <button class="add-to-cart-btn" data-product-name="MSI CROSSHAIR 16 HXD 2025" data-product-price="2999" data-product-image="img/MSI1.png">Add to Cart</button>
          </div>
          <div class="product">
            <img src="img/MSI4.png" alt="Katana 17 HX B14W">
            <p>Katana 17 HX B14W</p>
            <strong>$2999</strong>
            <button class="add-to-cart-btn" data-product-name="Katana 17 HX B14W" data-product-price="2999" data-product-image="img/MSI4.png">Add to Cart</button>
          </div>
          <div class="product">
            <img src="img/ROG1.png" alt="ROG ZEPHYRUS G14 GA403WR 2025">
            <p>ROG ZEPHYRUS G14 GA403WR 2025</p>
            <strong>$2999</strong>
            <button class="add-to-cart-btn" data-product-name="ROG ZEPHYRUS G14 GA403WR 2025" data-product-price="2999" data-product-image="img/ROG1.png">Add to Cart</button>
        </div>
            </div>

        <div class="section-header">
          <h2>Top Selling</h2>
        </div>
        <div class="product-row">
          <div class="product">
            <img src="img/MSI1.png" alt="MSI CROSSHAIR 16 HXD 2025">
            <p>MSI CROSSHAIR 16 HXD 2025</p>
            <strong>$2999</strong>
            <button class="add-to-cart-btn" data-product-name="MSI CROSSHAIR 16 HXD 2025" data-product-price="2999" data-product-image="img/MSI1.png">Add to Cart</button>
          </div>
          <div class="product">
            <img src="img/ROG1.png" alt="ROG STRIX SCAR 18 G835LW 2025">
            <p>ROG STRIX SCAR 18 G835LW 2025</p>
            <strong>$2999</strong>
            <button class="add-to-cart-btn" data-product-name="ROG STRIX SCAR 18 G835LW 2025" data-product-price="2999" data-product-image="img/ROG1.png">Add to Cart</button>
          </div>
          <div class="product">
            <img src="img/MSI4.png" alt="Katana 17 HX B14W">
            <p>Katana 17 HX B14W</p>
            <strong>$2999</strong>
            <button class="add-to-cart-btn" data-product-name="Katana 17 HX B14W" data-product-price="2999" data-product-image="img/MSI4.png">Add to Cart</button>
          </div>
          <div class="product">
            <img src="img/ROG3.png" alt="ROG Flow Z13 (2025) GZ302">
            <p>ROG Flow Z13 (2025) GZ302</p>
            <strong>$2999</strong>
            <button class="add-to-cart-btn" data-product-name="ROG Flow Z13 (2025) GZ302" data-product-price="2999" data-product-image="img/ROG3.png">Add to Cart</button>
          </div>
          <div class="product">
            <img src="img/ROG1.png" alt="ROG ZEPHYRUS G14 GA403WR 2025">
            <p>ROG ZEPHYRUS G14 GA403WR 2025</p>
            <strong>$2999</strong>
            <button class="add-to-cart-btn" data-product-name="ROG ZEPHYRUS G14 GA403WR 2025" data-product-price="2999" data-product-image="img/ROG1.png">Add to Cart</button>
        </div>
        <div class="product">
          <img src="img/MSI2.png" alt="MSI Cyborg 14A12VE-407KH">
          <p>MSI Cyborg 14A12VE-407KH</p>
          <strong>$2599</strong>
          <button class="add-to-cart-btn" data-product-name="MSI Cyborg 14A12VE-407KH" data-product-price="2599" data-product-image="img/MSI2.png">Add to Cart</button>
        </div>
            </div>
    </section>

    <div id="productDetailModal" class="product-modal-overlay">
        <div class="product-modal-content">
            <span class="close-button">&times;</span>
            <img id="modal-product-image" src="" alt="Product Image">
            <div class="product-details">
                <h3 id="modal-product-name"></h3>
                <ul id="modal-product-specs">
                    </ul>
                <strong id="modal-product-price"></strong>
            </div>
        </div>
    </div>

    <script>
        fetch("header.html")
          .then(response => response.text())
          .then(data => {
            document.getElementById("header-placeholder").innerHTML = data;

            const toggle = document.getElementById("category-toggle");
            const menu = document.getElementById("category-menu");

            toggle?.addEventListener("click", () => {
              menu.style.display = menu.style.display === "block" ? "none" : "block";
            });

            document.addEventListener("click", (e) => {
              if (!document.getElementById("category").contains(e.target)) {
                menu.style.display = "none";
              }
            });

            // --- Start of search functionality ---
            const searchInput = document.getElementById('search-input');
            const searchButton = document.getElementById('search-button');
            const productRows = document.querySelectorAll('.product-row');

            function filterProducts() {
                const searchTerm = searchInput.value.toLowerCase();

                productRows.forEach(row => {
                    const products = row.querySelectorAll('.product');
                    products.forEach(product => {
                        const productName = product.querySelector('p').textContent.toLowerCase();

                        if (productName.includes(searchTerm)) {
                            product.style.display = 'block';
                        } else {
                            product.style.display = 'none';
                        }
                    });
                });
            }

            if (searchButton) {
                searchButton.addEventListener('click', filterProducts);
            }
            // --- End of search functionality ---

            // --- Start of product detail modal functionality for Home Page ---
            const productModal = document.getElementById('productDetailModal');
            const closeButton = document.querySelector('.close-button');
            const modalProductImage = document.getElementById('modal-product-image');
            const modalProductName = document.getElementById('modal-product-name');
            const modalProductSpecs = document.getElementById('modal-product-specs');
            const modalProductPrice = document.getElementById('modal-product-price');

            // Define detailed product data for Home page products (laptops)
            const homeProductsData = {
                "ROG ZEPHYRUS G14 GA403WR 2025": {
                    imgSrc: "img/ROG1.png",
                    name: "ROG ZEPHYRUS G14 GA403WR 2025",
                    price: "$2999",
                    specs: [
                        "CPU: AMD Ryzen 9 8945HS",
                        "RAM: 16GB LPDDR5X 6400MHz",
                        "Storage: 1TB PCIe 4.0 NVMe SSD",
                        "Display: 14-inch QHD+ 165Hz ROG Nebula Display",
                        "GPU: NVIDIA GeForce RTX 4070 Laptop GPU",
                        "OS: Windows 11 Home",
                        "Weight: 1.6kg"
                    ]
                },
                "MSI Cyborg 14A12VE-407KH": {
                    imgSrc: "img/MSI2.png",
                    name: "MSI Cyborg 14A12VE-407KH",
                    price: "$2599",
                    specs: [
                        "CPU: Intel Core i7-12650H",
                        "RAM: 16GB DDR4 3200MHz",
                        "Storage: 512GB NVMe PCIe SSD",
                        "Display: 14-inch FHD 144Hz IPS-Level",
                        "GPU: NVIDIA GeForce RTX 4050 Laptop GPU",
                        "OS: Windows 11 Home",
                        "Weight: 1.7kg"
                    ]
                },
                "MSI CROSSHAIR 16 HXD 2025": {
                    imgSrc: "img/MSI1.png",
                    name: "MSI CROSSHAIR 16 HXD 2025",
                    price: "$2999",
                    specs: [
                        "CPU: Intel Core i7-14700HX",
                        "RAM: 32GB DDR5 5600MHz",
                        "Storage: 1TB NVMe PCIe Gen4 SSD",
                        "Display: 16-inch FHD+ 144Hz",
                        "GPU: NVIDIA GeForce RTX 4060 Laptop GPU",
                        "OS: Windows 11 Home",
                        "Cooling: Cooler Boost 5"
                    ]
                },
                "ROG ZEPHYRUS M16 GU604VY 2025": {
                    imgSrc: "img/ROG2.png",
                    name: "ROG ZEPHYRUS M16 GU604VY 2025",
                    price: "$2499",
                    specs: [
                        "CPU: Intel Core i9-13900H",
                        "RAM: 16GB DDR5 4800MHz",
                        "Storage: 1TB PCIe 4.0 NVMe SSD",
                        "Display: 16-inch QHD 240Hz Nebula Display",
                        "GPU: NVIDIA GeForce RTX 4070 Laptop GPU",
                        "OS: Windows 11 Home",
                        "Weight: 2.1kg"
                    ]
                },
                "Katana 17 HX B14W": {
                    imgSrc: "img/MSI4.png",
                    name: "Katana 17 HX B14W",
                    price: "$2999",
                    specs: [
                        "CPU: Intel Core i7-14700HX",
                        "RAM: 16GB DDR5 5600MHz",
                        "Storage: 1TB NVMe PCIe Gen4 SSD",
                        "Display: 17.3-inch FHD 144Hz",
                        "GPU: NVIDIA GeForce RTX 4060 Laptop GPU",
                        "OS: Windows 11 Home",
                        "Keyboard: RGB Gaming Keyboard"
                    ]
                },
                "ROG STRIX SCAR 18 G835LW 2025": {
                    imgSrc: "img/ROG1.png", // Reusing for the second instance
                    name: "ROG STRIX SCAR 18 G835LW 2025",
                    price: "$2999",
                    specs: [
                        "CPU: Intel Core i9-14900HX",
                        "RAM: 32GB DDR5 5600MHz",
                        "Storage: 2TB PCIe 4.0 NVMe SSD",
                        "Display: 18-inch QHD+ 240Hz ROG Nebula HDR Display",
                        "GPU: NVIDIA GeForce RTX 4080 Laptop GPU",
                        "OS: Windows 11 Home",
                        "Cooling: Liquid Metal & Tri-Fan"
                    ]
                },
                "ROG Flow Z13 (2025) GZ302": {
                    imgSrc: "img/ROG3.png",
                    name: "ROG Flow Z13 (2025) GZ302",
                    price: "$2999",
                    specs: [
                        "CPU: Intel Core Ultra 9",
                        "RAM: 16GB LPDDR5X",
                        "Storage: 1TB PCIe 4.0 NVMe SSD",
                        "Display: 13.4-inch QHD+ 165Hz Touch",
                        "GPU: NVIDIA GeForce RTX 4050 Laptop GPU (or XG Mobile)",
                        "Form Factor: Detachable 2-in-1",
                        "OS: Windows 11 Home"
                    ]
                }
                // Add more home page products here if you want their details to appear in the modal
            };

            const products = document.querySelectorAll('.product');

            products.forEach(product => {
                const clickableElements = product.querySelectorAll('p, img, strong');
                clickableElements.forEach(element => {
                    element.style.cursor = 'pointer';
                    element.addEventListener('click', function(event) {
                        if (!event.target.classList.contains('add-to-cart-btn')) {
                            const productName = this.closest('.product').querySelector('p').textContent;
                            const productInfo = homeProductsData[productName];

                            if (productInfo) {
                                modalProductImage.src = productInfo.imgSrc;
                                modalProductName.textContent = productInfo.name;
                                modalProductPrice.textContent = productInfo.price;

                                modalProductSpecs.innerHTML = '';
                                productInfo.specs.forEach(spec => {
                                    const li = document.createElement('li');
                                    li.textContent = spec;
                                    modalProductSpecs.appendChild(li);
                                });

                                productModal.style.display = 'flex';
                            } else {
                                alert(`Detailed information for "${productName}" is not available yet.`);
                                modalProductImage.src = this.closest('.product').querySelector('img').src;
                                modalProductName.textContent = productName;
                                modalProductPrice.textContent = this.closest('.product').querySelector('strong').textContent;
                                modalProductSpecs.innerHTML = '<li>No detailed specifications available.</li>';
                                productModal.style.display = 'flex';
                            }
                        }
                    });
                });
            });

            closeButton.addEventListener('click', function() {
                productModal.style.display = 'none';
            });

            window.addEventListener('click', function(event) {
                if (event.target === productModal) {
                    productModal.style.display = 'none';
                }
            });
            // --- End of product detail modal functionality ---

            // --- Start of Add to Cart functionality ---
            const cartCountSpan = document.getElementById('cart-count');
            let cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];

            function updateCartCount() {
                if (cartCountSpan) {
                    cartCountSpan.textContent = cart.length;
                }
            }

            function addToCart(product) {
                cart.push(product);
                localStorage.setItem('shoppingCart', JSON.stringify(cart));
                updateCartCount();
                alert(`${product.name} has been added to your cart!`);
            }

            const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');
            addToCartButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const productName = this.dataset.productName;
                    const productPrice = parseFloat(this.dataset.productPrice);
                    const productImage = this.dataset.productImage;

                    const productToAdd = {
                        name: productName,
                        price: productPrice,
                        image: productImage
                    };
                    addToCart(productToAdd);
                });
            });

            updateCartCount();
            // --- End of Add to Cart functionality ---
          });
      </script>
</body>
</html>